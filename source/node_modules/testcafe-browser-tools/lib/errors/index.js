"use strict";
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result["default"] = mod;
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const CODES = __importStar(require("./codes"));
exports.CODES = CODES;
const TEMPLATES = __importStar(require("../templates"));
function getErrorCode(errorClass) {
    const code = Object
        .keys(CODES)
        .find(currentCode => exports.CLASSES[currentCode] === errorClass); // eslint-disable-line no-use-before-define
    return code || CODES.E000;
}
function getErrorInfo(errorClass) {
    const code = getErrorCode(errorClass);
    return {
        constructor: exports.CLASSES[code],
        message: exports.MESSAGES[code],
        code
    };
}
class BasicError extends Error {
    constructor(data = {}) {
        const { code, constructor, message } = getErrorInfo(new.target);
        super(message(data));
        this.name = constructor.name;
        this.data = data;
        this.code = code;
    }
}
class BrowserPathNotSetError extends BasicError {
}
exports.BrowserPathNotSetError = BrowserPathNotSetError;
class UnableToRunBrowsersError extends BasicError {
    constructor({ path }) {
        super({ path });
    }
}
exports.UnableToRunBrowsersError = UnableToRunBrowsersError;
class NativeBinaryHasFailedError extends BasicError {
    constructor({ binary, exitCode, output }) {
        super({ binary, exitCode, output });
    }
}
exports.NativeBinaryHasFailedError = NativeBinaryHasFailedError;
class PermissionError extends NativeBinaryHasFailedError {
}
class UnableToAccessAutomationAPIError extends PermissionError {
}
exports.UnableToAccessAutomationAPIError = UnableToAccessAutomationAPIError;
class UnableToAccessScreenRecordingAPIError extends PermissionError {
}
exports.UnableToAccessScreenRecordingAPIError = UnableToAccessScreenRecordingAPIError;
exports.MESSAGES = {
    [CODES.E000]: TEMPLATES.BASIC_ERROR_MESSAGE,
    [CODES.E001]: TEMPLATES.BROWSER_PATH_NOT_SET,
    [CODES.E002]: TEMPLATES.UNABLE_TO_RUN_BROWSERS,
    [CODES.E003]: TEMPLATES.NATIVE_BINARY_HAS_FAILED,
    [CODES.E004]: TEMPLATES.UNABLE_TO_ACCESS_AUTOMATION_API,
    [CODES.E005]: TEMPLATES.UNABLE_TO_ACCESS_SCREEN_RECORDING_API
};
exports.CLASSES = {
    [CODES.E000]: BasicError,
    [CODES.E001]: BrowserPathNotSetError,
    [CODES.E002]: UnableToRunBrowsersError,
    [CODES.E003]: NativeBinaryHasFailedError,
    [CODES.E004]: UnableToAccessAutomationAPIError,
    [CODES.E005]: UnableToAccessScreenRecordingAPIError
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZXJyb3JzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLCtDQUFpQztBQWtGeEIsc0JBQUs7QUFqRmQsd0RBQTBDO0FBRzFDLFNBQVMsWUFBWSxDQUFFLFVBQVU7SUFDN0IsTUFBTSxJQUFJLEdBQUcsTUFBTTtTQUNkLElBQUksQ0FBQyxLQUFLLENBQUM7U0FDWCxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxlQUFPLENBQUMsV0FBVyxDQUFDLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQywyQ0FBMkM7SUFFMUcsT0FBTyxJQUFJLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQztBQUM5QixDQUFDO0FBRUQsU0FBUyxZQUFZLENBQUUsVUFBVTtJQUM3QixNQUFNLElBQUksR0FBRyxZQUFZLENBQUMsVUFBVSxDQUFDLENBQUM7SUFFdEMsT0FBTztRQUNILFdBQVcsRUFBRSxlQUFPLENBQUMsSUFBSSxDQUFDO1FBQzFCLE9BQU8sRUFBTSxnQkFBUSxDQUFDLElBQUksQ0FBQztRQUUzQixJQUFJO0tBQ1AsQ0FBQztBQUNOLENBQUM7QUFFRCxNQUFNLFVBQVcsU0FBUSxLQUFLO0lBQzFCLFlBQWEsSUFBSSxHQUFHLEVBQUU7UUFDbEIsTUFBTSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUFFLEdBQUksWUFBWSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUVqRSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFFckIsSUFBSSxDQUFDLElBQUksR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDO1FBQzdCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0lBQ3JCLENBQUM7Q0FDSjtBQUVELE1BQWEsc0JBQXVCLFNBQVEsVUFBVTtDQUVyRDtBQUZELHdEQUVDO0FBRUQsTUFBYSx3QkFBeUIsU0FBUSxVQUFVO0lBQ3BELFlBQWEsRUFBRSxJQUFJLEVBQUU7UUFDakIsS0FBSyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUNwQixDQUFDO0NBQ0o7QUFKRCw0REFJQztBQUVELE1BQWEsMEJBQTJCLFNBQVEsVUFBVTtJQUN0RCxZQUFhLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUU7UUFDckMsS0FBSyxDQUFDLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO0lBQ3hDLENBQUM7Q0FDSjtBQUpELGdFQUlDO0FBRUQsTUFBTSxlQUFnQixTQUFRLDBCQUEwQjtDQUV2RDtBQUVELE1BQWEsZ0NBQWlDLFNBQVEsZUFBZTtDQUVwRTtBQUZELDRFQUVDO0FBRUQsTUFBYSxxQ0FBc0MsU0FBUSxlQUFlO0NBRXpFO0FBRkQsc0ZBRUM7QUFFWSxRQUFBLFFBQVEsR0FBRztJQUNwQixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxTQUFTLENBQUMsbUJBQW1CO0lBQzNDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLFNBQVMsQ0FBQyxvQkFBb0I7SUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsU0FBUyxDQUFDLHNCQUFzQjtJQUM5QyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxTQUFTLENBQUMsd0JBQXdCO0lBQ2hELENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLFNBQVMsQ0FBQywrQkFBK0I7SUFDdkQsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsU0FBUyxDQUFDLHFDQUFxQztDQUNoRSxDQUFDO0FBRVcsUUFBQSxPQUFPLEdBQUc7SUFDbkIsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsVUFBVTtJQUN4QixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxzQkFBc0I7SUFDcEMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsd0JBQXdCO0lBQ3RDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLDBCQUEwQjtJQUN4QyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxnQ0FBZ0M7SUFDOUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUscUNBQXFDO0NBQ3RELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDT0RFUyBmcm9tICcuL2NvZGVzJztcbmltcG9ydCAqIGFzIFRFTVBMQVRFUyBmcm9tICcuLi90ZW1wbGF0ZXMnO1xuXG5cbmZ1bmN0aW9uIGdldEVycm9yQ29kZSAoZXJyb3JDbGFzcykge1xuICAgIGNvbnN0IGNvZGUgPSBPYmplY3RcbiAgICAgICAgLmtleXMoQ09ERVMpXG4gICAgICAgIC5maW5kKGN1cnJlbnRDb2RlID0+IENMQVNTRVNbY3VycmVudENvZGVdID09PSBlcnJvckNsYXNzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxuXG4gICAgcmV0dXJuIGNvZGUgfHwgQ09ERVMuRTAwMDtcbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JJbmZvIChlcnJvckNsYXNzKSB7XG4gICAgY29uc3QgY29kZSA9IGdldEVycm9yQ29kZShlcnJvckNsYXNzKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGNvbnN0cnVjdG9yOiBDTEFTU0VTW2NvZGVdLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIG1lc3NhZ2U6ICAgICBNRVNTQUdFU1tjb2RlXSwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxuXG4gICAgICAgIGNvZGVcbiAgICB9O1xufVxuXG5jbGFzcyBCYXNpY0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yIChkYXRhID0ge30pIHtcbiAgICAgICAgY29uc3QgeyBjb2RlLCBjb25zdHJ1Y3RvciwgbWVzc2FnZSB9ICA9IGdldEVycm9ySW5mbyhuZXcudGFyZ2V0KTtcblxuICAgICAgICBzdXBlcihtZXNzYWdlKGRhdGEpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJyb3dzZXJQYXRoTm90U2V0RXJyb3IgZXh0ZW5kcyBCYXNpY0Vycm9yIHtcblxufVxuXG5leHBvcnQgY2xhc3MgVW5hYmxlVG9SdW5Ccm93c2Vyc0Vycm9yIGV4dGVuZHMgQmFzaWNFcnJvciB7XG4gICAgY29uc3RydWN0b3IgKHsgcGF0aCB9KSB7XG4gICAgICAgIHN1cGVyKHsgcGF0aCB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBOYXRpdmVCaW5hcnlIYXNGYWlsZWRFcnJvciBleHRlbmRzIEJhc2ljRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yICh7IGJpbmFyeSwgZXhpdENvZGUsIG91dHB1dCB9KSB7XG4gICAgICAgIHN1cGVyKHsgYmluYXJ5LCBleGl0Q29kZSwgb3V0cHV0IH0pO1xuICAgIH1cbn1cblxuY2xhc3MgUGVybWlzc2lvbkVycm9yIGV4dGVuZHMgTmF0aXZlQmluYXJ5SGFzRmFpbGVkRXJyb3Ige1xuXG59XG5cbmV4cG9ydCBjbGFzcyBVbmFibGVUb0FjY2Vzc0F1dG9tYXRpb25BUElFcnJvciBleHRlbmRzIFBlcm1pc3Npb25FcnJvciB7XG5cbn1cblxuZXhwb3J0IGNsYXNzIFVuYWJsZVRvQWNjZXNzU2NyZWVuUmVjb3JkaW5nQVBJRXJyb3IgZXh0ZW5kcyBQZXJtaXNzaW9uRXJyb3Ige1xuXG59XG5cbmV4cG9ydCBjb25zdCBNRVNTQUdFUyA9IHtcbiAgICBbQ09ERVMuRTAwMF06IFRFTVBMQVRFUy5CQVNJQ19FUlJPUl9NRVNTQUdFLFxuICAgIFtDT0RFUy5FMDAxXTogVEVNUExBVEVTLkJST1dTRVJfUEFUSF9OT1RfU0VULFxuICAgIFtDT0RFUy5FMDAyXTogVEVNUExBVEVTLlVOQUJMRV9UT19SVU5fQlJPV1NFUlMsXG4gICAgW0NPREVTLkUwMDNdOiBURU1QTEFURVMuTkFUSVZFX0JJTkFSWV9IQVNfRkFJTEVELFxuICAgIFtDT0RFUy5FMDA0XTogVEVNUExBVEVTLlVOQUJMRV9UT19BQ0NFU1NfQVVUT01BVElPTl9BUEksXG4gICAgW0NPREVTLkUwMDVdOiBURU1QTEFURVMuVU5BQkxFX1RPX0FDQ0VTU19TQ1JFRU5fUkVDT1JESU5HX0FQSVxufTtcblxuZXhwb3J0IGNvbnN0IENMQVNTRVMgPSB7XG4gICAgW0NPREVTLkUwMDBdOiBCYXNpY0Vycm9yLFxuICAgIFtDT0RFUy5FMDAxXTogQnJvd3NlclBhdGhOb3RTZXRFcnJvcixcbiAgICBbQ09ERVMuRTAwMl06IFVuYWJsZVRvUnVuQnJvd3NlcnNFcnJvcixcbiAgICBbQ09ERVMuRTAwM106IE5hdGl2ZUJpbmFyeUhhc0ZhaWxlZEVycm9yLFxuICAgIFtDT0RFUy5FMDA0XTogVW5hYmxlVG9BY2Nlc3NBdXRvbWF0aW9uQVBJRXJyb3IsXG4gICAgW0NPREVTLkUwMDVdOiBVbmFibGVUb0FjY2Vzc1NjcmVlblJlY29yZGluZ0FQSUVycm9yXG59O1xuXG5cbmV4cG9ydCB7IENPREVTIH07XG4iXX0=