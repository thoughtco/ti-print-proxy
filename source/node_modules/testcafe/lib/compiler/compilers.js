"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.initTestFileCompilers = exports.getTestFileCompilers = void 0;
const testcafe_hammerhead_1 = __importDefault(require("testcafe-hammerhead"));
const testcafe_legacy_api_1 = require("testcafe-legacy-api");
const compiler_1 = __importDefault(require("./test-file/formats/es-next/compiler"));
const compiler_2 = __importDefault(require("./test-file/formats/typescript/compiler"));
const compiler_3 = __importDefault(require("./test-file/formats/coffeescript/compiler"));
const raw_1 = __importDefault(require("./test-file/formats/raw"));
function createTestFileCompilers(options) {
    return [
        new testcafe_legacy_api_1.Compiler(testcafe_hammerhead_1.default.processScript),
        new compiler_1.default(),
        new compiler_2.default(options),
        new compiler_3.default(),
        new raw_1.default()
    ];
}
let testFileCompilers = [];
function getTestFileCompilers() {
    if (!testFileCompilers.length)
        initTestFileCompilers();
    return testFileCompilers;
}
exports.getTestFileCompilers = getTestFileCompilers;
function initTestFileCompilers(options = {}) {
    testFileCompilers = createTestFileCompilers(options);
}
exports.initTestFileCompilers = initTestFileCompilers;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcGlsZXJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NvbXBpbGVyL2NvbXBpbGVycy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSw4RUFBNkM7QUFDN0MsNkRBQXlFO0FBQ3pFLG9GQUEwRTtBQUMxRSx1RkFBaUY7QUFDakYseUZBQXFGO0FBQ3JGLGtFQUEwRDtBQUUxRCxTQUFTLHVCQUF1QixDQUFFLE9BQU87SUFDckMsT0FBTztRQUNILElBQUksOEJBQXNCLENBQUMsNkJBQVUsQ0FBQyxhQUFhLENBQUM7UUFDcEQsSUFBSSxrQkFBc0IsRUFBRTtRQUM1QixJQUFJLGtCQUEwQixDQUFDLE9BQU8sQ0FBQztRQUN2QyxJQUFJLGtCQUE0QixFQUFFO1FBQ2xDLElBQUksYUFBbUIsRUFBRTtLQUM1QixDQUFDO0FBQ04sQ0FBQztBQUVELElBQUksaUJBQWlCLEdBQUcsRUFBRSxDQUFDO0FBRTNCLFNBQWdCLG9CQUFvQjtJQUNoQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTTtRQUN6QixxQkFBcUIsRUFBRSxDQUFDO0lBRTVCLE9BQU8saUJBQWlCLENBQUM7QUFDN0IsQ0FBQztBQUxELG9EQUtDO0FBRUQsU0FBZ0IscUJBQXFCLENBQUUsT0FBTyxHQUFHLEVBQUU7SUFDL0MsaUJBQWlCLEdBQUcsdUJBQXVCLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDekQsQ0FBQztBQUZELHNEQUVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGhhbW1lcmhlYWQgZnJvbSAndGVzdGNhZmUtaGFtbWVyaGVhZCc7XG5pbXBvcnQgeyBDb21waWxlciBhcyBMZWdhY3lUZXN0RmlsZUNvbXBpbGVyIH0gZnJvbSAndGVzdGNhZmUtbGVnYWN5LWFwaSc7XG5pbXBvcnQgRXNOZXh0VGVzdEZpbGVDb21waWxlciBmcm9tICcuL3Rlc3QtZmlsZS9mb3JtYXRzL2VzLW5leHQvY29tcGlsZXInO1xuaW1wb3J0IFR5cGVTY3JpcHRUZXN0RmlsZUNvbXBpbGVyIGZyb20gJy4vdGVzdC1maWxlL2Zvcm1hdHMvdHlwZXNjcmlwdC9jb21waWxlcic7XG5pbXBvcnQgQ29mZmVlU2NyaXB0VGVzdEZpbGVDb21waWxlciBmcm9tICcuL3Rlc3QtZmlsZS9mb3JtYXRzL2NvZmZlZXNjcmlwdC9jb21waWxlcic7XG5pbXBvcnQgUmF3VGVzdEZpbGVDb21waWxlciBmcm9tICcuL3Rlc3QtZmlsZS9mb3JtYXRzL3Jhdyc7XG5cbmZ1bmN0aW9uIGNyZWF0ZVRlc3RGaWxlQ29tcGlsZXJzIChvcHRpb25zKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgbmV3IExlZ2FjeVRlc3RGaWxlQ29tcGlsZXIoaGFtbWVyaGVhZC5wcm9jZXNzU2NyaXB0KSxcbiAgICAgICAgbmV3IEVzTmV4dFRlc3RGaWxlQ29tcGlsZXIoKSxcbiAgICAgICAgbmV3IFR5cGVTY3JpcHRUZXN0RmlsZUNvbXBpbGVyKG9wdGlvbnMpLFxuICAgICAgICBuZXcgQ29mZmVlU2NyaXB0VGVzdEZpbGVDb21waWxlcigpLFxuICAgICAgICBuZXcgUmF3VGVzdEZpbGVDb21waWxlcigpXG4gICAgXTtcbn1cblxubGV0IHRlc3RGaWxlQ29tcGlsZXJzID0gW107XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXN0RmlsZUNvbXBpbGVycyAoKSB7XG4gICAgaWYgKCF0ZXN0RmlsZUNvbXBpbGVycy5sZW5ndGgpXG4gICAgICAgIGluaXRUZXN0RmlsZUNvbXBpbGVycygpO1xuXG4gICAgcmV0dXJuIHRlc3RGaWxlQ29tcGlsZXJzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdFRlc3RGaWxlQ29tcGlsZXJzIChvcHRpb25zID0ge30pIHtcbiAgICB0ZXN0RmlsZUNvbXBpbGVycyA9IGNyZWF0ZVRlc3RGaWxlQ29tcGlsZXJzKG9wdGlvbnMpO1xufVxuIl19