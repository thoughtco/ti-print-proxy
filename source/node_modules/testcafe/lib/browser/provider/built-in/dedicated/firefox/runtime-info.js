"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const endpoint_utils_1 = require("endpoint-utils");
const config_1 = __importDefault(require("./config"));
const create_temp_profile_1 = __importDefault(require("./create-temp-profile"));
async function default_1(configString) {
    const config = config_1.default(configString);
    const marionettePort = config.marionettePort || (!config.userProfile ? await endpoint_utils_1.getFreePort() : null);
    const runtimeInfo = { config, marionettePort };
    runtimeInfo.tempProfileDir = !config.userProfile ? await create_temp_profile_1.default(runtimeInfo) : null;
    runtimeInfo.activeWindowId = null;
    return runtimeInfo;
}
exports.default = default_1;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicnVudGltZS1pbmZvLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2Jyb3dzZXIvcHJvdmlkZXIvYnVpbHQtaW4vZGVkaWNhdGVkL2ZpcmVmb3gvcnVudGltZS1pbmZvLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsbURBQTZDO0FBQzdDLHNEQUFpQztBQUNqQyxnRkFBc0Q7QUFHdkMsS0FBSyxvQkFBVyxZQUFZO0lBQ3ZDLE1BQU0sTUFBTSxHQUFXLGdCQUFTLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDL0MsTUFBTSxjQUFjLEdBQUcsTUFBTSxDQUFDLGNBQWMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSw0QkFBVyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ25HLE1BQU0sV0FBVyxHQUFNLEVBQUUsTUFBTSxFQUFFLGNBQWMsRUFBRSxDQUFDO0lBRWxELFdBQVcsQ0FBQyxjQUFjLEdBQUcsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxNQUFNLDZCQUFpQixDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDL0YsV0FBVyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7SUFFbEMsT0FBTyxXQUFXLENBQUM7QUFDdkIsQ0FBQztBQVRELDRCQVNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RnJlZVBvcnQgfSBmcm9tICdlbmRwb2ludC11dGlscyc7XG5pbXBvcnQgZ2V0Q29uZmlnIGZyb20gJy4vY29uZmlnJztcbmltcG9ydCBjcmVhdGVUZW1wUHJvZmlsZSBmcm9tICcuL2NyZWF0ZS10ZW1wLXByb2ZpbGUnO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIChjb25maWdTdHJpbmcpIHtcbiAgICBjb25zdCBjb25maWcgICAgICAgICA9IGdldENvbmZpZyhjb25maWdTdHJpbmcpO1xuICAgIGNvbnN0IG1hcmlvbmV0dGVQb3J0ID0gY29uZmlnLm1hcmlvbmV0dGVQb3J0IHx8ICghY29uZmlnLnVzZXJQcm9maWxlID8gYXdhaXQgZ2V0RnJlZVBvcnQoKSA6IG51bGwpO1xuICAgIGNvbnN0IHJ1bnRpbWVJbmZvICAgID0geyBjb25maWcsIG1hcmlvbmV0dGVQb3J0IH07XG5cbiAgICBydW50aW1lSW5mby50ZW1wUHJvZmlsZURpciA9ICFjb25maWcudXNlclByb2ZpbGUgPyBhd2FpdCBjcmVhdGVUZW1wUHJvZmlsZShydW50aW1lSW5mbykgOiBudWxsO1xuICAgIHJ1bnRpbWVJbmZvLmFjdGl2ZVdpbmRvd0lkID0gbnVsbDtcblxuICAgIHJldHVybiBydW50aW1lSW5mbztcbn1cbiJdfQ==