"use strict";
// -------------------------------------------------------------
// WARNING: this file is used by both the client and the server.
// Do not use any browser or node-specific API!
// -------------------------------------------------------------
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.AssertionOptions = exports.ResizeToFitDeviceOptions = exports.DragToElementOptions = exports.TypeOptions = exports.MoveOptions = exports.ClickOptions = exports.MouseOptions = exports.ElementScreenshotOptions = exports.ScrollOptions = exports.OffsetOptions = exports.ActionOptions = exports.speedOption = exports.booleanOption = exports.positiveIntegerOption = exports.integerOption = void 0;
const assignable_1 = __importDefault(require("../../utils/assignable"));
const factories_1 = require("./validations/factories");
const test_run_1 = require("../../errors/test-run");
exports.integerOption = factories_1.createIntegerValidator(test_run_1.ActionIntegerOptionError);
exports.positiveIntegerOption = factories_1.createPositiveIntegerValidator(test_run_1.ActionPositiveIntegerOptionError);
exports.booleanOption = factories_1.createBooleanValidator(test_run_1.ActionBooleanOptionError);
exports.speedOption = factories_1.createSpeedValidator(test_run_1.ActionSpeedOptionError);
// Actions
class ActionOptions extends assignable_1.default {
    constructor(obj, validate) {
        super();
        this.speed = null;
        this._assignFrom(obj, validate);
    }
    _getAssignableProperties() {
        return [
            { name: 'speed', type: exports.speedOption }
        ];
    }
}
exports.ActionOptions = ActionOptions;
// Offset
class OffsetOptions extends ActionOptions {
    constructor(obj, validate) {
        super();
        this.offsetX = null;
        this.offsetY = null;
        this._assignFrom(obj, validate);
    }
    _getAssignableProperties() {
        return super._getAssignableProperties().concat([
            { name: 'offsetX', type: exports.integerOption },
            { name: 'offsetY', type: exports.integerOption }
        ]);
    }
}
exports.OffsetOptions = OffsetOptions;
class ScrollOptions extends OffsetOptions {
    constructor(obj, validate) {
        super();
        this.scrollToCenter = false;
        this.skipParentFrames = false;
        this._assignFrom(obj, validate);
    }
    _getAssignableProperties() {
        return super._getAssignableProperties().concat([
            { name: 'scrollToCenter', type: exports.booleanOption },
            { name: 'skipParentFrames', type: exports.booleanOption }
        ]);
    }
}
exports.ScrollOptions = ScrollOptions;
// Element Screenshot
class ElementScreenshotOptions extends ActionOptions {
    constructor(obj, validate) {
        super();
        this.scrollTargetX = null;
        this.scrollTargetY = null;
        this.includeMargins = false;
        this.includeBorders = true;
        this.includePaddings = true;
        this.crop = {
            left: null,
            right: null,
            top: null,
            bottom: null
        };
        this._assignFrom(obj, validate);
    }
    _getAssignableProperties() {
        return super._getAssignableProperties().concat([
            { name: 'scrollTargetX', type: exports.integerOption },
            { name: 'scrollTargetY', type: exports.integerOption },
            { name: 'crop.left', type: exports.integerOption },
            { name: 'crop.right', type: exports.integerOption },
            { name: 'crop.top', type: exports.integerOption },
            { name: 'crop.bottom', type: exports.integerOption },
            { name: 'includeMargins', type: exports.booleanOption },
            { name: 'includeBorders', type: exports.booleanOption },
            { name: 'includePaddings', type: exports.booleanOption }
        ]);
    }
}
exports.ElementScreenshotOptions = ElementScreenshotOptions;
// Mouse
class MouseOptions extends OffsetOptions {
    constructor(obj, validate) {
        super();
        this.modifiers = {
            ctrl: false,
            alt: false,
            shift: false,
            meta: false
        };
        this._assignFrom(obj, validate);
    }
    _getAssignableProperties() {
        return super._getAssignableProperties().concat([
            { name: 'modifiers.ctrl', type: exports.booleanOption },
            { name: 'modifiers.alt', type: exports.booleanOption },
            { name: 'modifiers.shift', type: exports.booleanOption },
            { name: 'modifiers.meta', type: exports.booleanOption }
        ]);
    }
}
exports.MouseOptions = MouseOptions;
// Click
class ClickOptions extends MouseOptions {
    constructor(obj, validate) {
        super();
        this.caretPos = null;
        this._assignFrom(obj, validate);
    }
    _getAssignableProperties() {
        return super._getAssignableProperties().concat([
            { name: 'caretPos', type: exports.positiveIntegerOption }
        ]);
    }
}
exports.ClickOptions = ClickOptions;
// Move
class MoveOptions extends MouseOptions {
    constructor(obj, validate) {
        super();
        this.speed = null;
        this.minMovingTime = null;
        this.holdLeftButton = false;
        this.skipScrolling = false;
        this.skipDefaultDragBehavior = false;
        this._assignFrom(obj, validate);
    }
    _getAssignableProperties() {
        return super._getAssignableProperties().concat([
            { name: 'speed' },
            { name: 'minMovingTime' },
            { name: 'holdLeftButton' },
            { name: 'skipScrolling', type: exports.booleanOption },
            { name: 'skipDefaultDragBehavior', type: exports.booleanOption }
        ]);
    }
}
exports.MoveOptions = MoveOptions;
// Type
class TypeOptions extends ClickOptions {
    constructor(obj, validate) {
        super();
        this.replace = false;
        this.paste = false;
        this._assignFrom(obj, validate);
    }
    _getAssignableProperties() {
        return super._getAssignableProperties().concat([
            { name: 'replace', type: exports.booleanOption },
            { name: 'paste', type: exports.booleanOption }
        ]);
    }
}
exports.TypeOptions = TypeOptions;
// DragToElement
class DragToElementOptions extends MouseOptions {
    constructor(obj, validate) {
        super(obj, validate);
        this.destinationOffsetX = null;
        this.destinationOffsetY = null;
        this._assignFrom(obj, validate);
    }
    _getAssignableProperties() {
        return super._getAssignableProperties().concat([
            { name: 'destinationOffsetX', type: exports.integerOption },
            { name: 'destinationOffsetY', type: exports.integerOption }
        ]);
    }
}
exports.DragToElementOptions = DragToElementOptions;
//ResizeToFitDevice
class ResizeToFitDeviceOptions extends assignable_1.default {
    constructor(obj, validate) {
        super();
        this.portraitOrientation = false;
        this._assignFrom(obj, validate);
    }
    _getAssignableProperties() {
        return [
            { name: 'portraitOrientation', type: exports.booleanOption }
        ];
    }
}
exports.ResizeToFitDeviceOptions = ResizeToFitDeviceOptions;
//Assertion
class AssertionOptions extends assignable_1.default {
    constructor(obj, validate) {
        super();
        this.timeout = void 0;
        this.allowUnawaitedPromise = false;
        this._assignFrom(obj, validate);
    }
    _getAssignableProperties() {
        return [
            { name: 'timeout', type: exports.positiveIntegerOption },
            { name: 'allowUnawaitedPromise', type: exports.booleanOption }
        ];
    }
}
exports.AssertionOptions = AssertionOptions;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3B0aW9ucy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90ZXN0LXJ1bi9jb21tYW5kcy9vcHRpb25zLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxnRUFBZ0U7QUFDaEUsZ0VBQWdFO0FBQ2hFLCtDQUErQztBQUMvQyxnRUFBZ0U7Ozs7OztBQUVoRSx3RUFBZ0Q7QUFDaEQsdURBS2lDO0FBQ2pDLG9EQUsrQjtBQUVsQixRQUFBLGFBQWEsR0FBVyxrQ0FBc0IsQ0FBQyxtQ0FBd0IsQ0FBQyxDQUFDO0FBQ3pFLFFBQUEscUJBQXFCLEdBQUcsMENBQThCLENBQUMsMkNBQWdDLENBQUMsQ0FBQztBQUN6RixRQUFBLGFBQWEsR0FBVyxrQ0FBc0IsQ0FBQyxtQ0FBd0IsQ0FBQyxDQUFDO0FBQ3pFLFFBQUEsV0FBVyxHQUFhLGdDQUFvQixDQUFDLGlDQUFzQixDQUFDLENBQUM7QUFHbEYsVUFBVTtBQUNWLE1BQWEsYUFBYyxTQUFRLG9CQUFVO0lBQ3pDLFlBQWEsR0FBRyxFQUFFLFFBQVE7UUFDdEIsS0FBSyxFQUFFLENBQUM7UUFFUixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUVsQixJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRUQsd0JBQXdCO1FBQ3BCLE9BQU87WUFDSCxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLG1CQUFXLEVBQUU7U0FDdkMsQ0FBQztJQUNOLENBQUM7Q0FDSjtBQWRELHNDQWNDO0FBRUQsU0FBUztBQUNULE1BQWEsYUFBYyxTQUFRLGFBQWE7SUFDNUMsWUFBYSxHQUFHLEVBQUUsUUFBUTtRQUN0QixLQUFLLEVBQUUsQ0FBQztRQUVSLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1FBRXBCLElBQUksQ0FBQyxXQUFXLENBQUMsR0FB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QyxPQUFPLEdBQWlCLEtBQUssQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxLQUFLLENBQUM7UUFFbkMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVELHdCQUF3QjtRQUNwQixPQUFPO1lBQ0gsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSw2QkFBcUIsRUFBRTtZQUNoRCxFQUFFLElBQUksRUFBRSx1QkFBdUIsRUFBRSxJQUFJLEVBQUUscUJBQWEsRUFBRTtTQUN6RCxDQUFDO0lBQ04sQ0FBQztDQUNKO0FBaEJELDRDQWdCQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFdBUk5JTkc6IHRoaXMgZmlsZSBpcyB1c2VkIGJ5IGJvdGggdGhlIGNsaWVudCBhbmQgdGhlIHNlcnZlci5cbi8vIERvIG5vdCB1c2UgYW55IGJyb3dzZXIgb3Igbm9kZS1zcGVjaWZpYyBBUEkhXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmltcG9ydCBBc3NpZ25hYmxlIGZyb20gJy4uLy4uL3V0aWxzL2Fzc2lnbmFibGUnO1xuaW1wb3J0IHtcbiAgICBjcmVhdGVCb29sZWFuVmFsaWRhdG9yLFxuICAgIGNyZWF0ZUludGVnZXJWYWxpZGF0b3IsXG4gICAgY3JlYXRlUG9zaXRpdmVJbnRlZ2VyVmFsaWRhdG9yLFxuICAgIGNyZWF0ZVNwZWVkVmFsaWRhdG9yXG59IGZyb20gJy4vdmFsaWRhdGlvbnMvZmFjdG9yaWVzJztcbmltcG9ydCB7XG4gICAgQWN0aW9uSW50ZWdlck9wdGlvbkVycm9yLFxuICAgIEFjdGlvblBvc2l0aXZlSW50ZWdlck9wdGlvbkVycm9yLFxuICAgIEFjdGlvbkJvb2xlYW5PcHRpb25FcnJvcixcbiAgICBBY3Rpb25TcGVlZE9wdGlvbkVycm9yXG59IGZyb20gJy4uLy4uL2Vycm9ycy90ZXN0LXJ1bic7XG5cbmV4cG9ydCBjb25zdCBpbnRlZ2VyT3B0aW9uICAgICAgICAgPSBjcmVhdGVJbnRlZ2VyVmFsaWRhdG9yKEFjdGlvbkludGVnZXJPcHRpb25FcnJvcik7XG5leHBvcnQgY29uc3QgcG9zaXRpdmVJbnRlZ2VyT3B0aW9uID0gY3JlYXRlUG9zaXRpdmVJbnRlZ2VyVmFsaWRhdG9yKEFjdGlvblBvc2l0aXZlSW50ZWdlck9wdGlvbkVycm9yKTtcbmV4cG9ydCBjb25zdCBib29sZWFuT3B0aW9uICAgICAgICAgPSBjcmVhdGVCb29sZWFuVmFsaWRhdG9yKEFjdGlvbkJvb2xlYW5PcHRpb25FcnJvcik7XG5leHBvcnQgY29uc3Qgc3BlZWRPcHRpb24gICAgICAgICAgID0gY3JlYXRlU3BlZWRWYWxpZGF0b3IoQWN0aW9uU3BlZWRPcHRpb25FcnJvcik7XG5cblxuLy8gQWN0aW9uc1xuZXhwb3J0IGNsYXNzIEFjdGlvbk9wdGlvbnMgZXh0ZW5kcyBBc3NpZ25hYmxlIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc3BlZWQgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHsgbmFtZTogJ3NwZWVkJywgdHlwZTogc3BlZWRPcHRpb24gfVxuICAgICAgICBdO1xuICAgIH1cbn1cblxuLy8gT2Zmc2V0XG5leHBvcnQgY2xhc3MgT2Zmc2V0T3B0aW9ucyBleHRlbmRzIEFjdGlvbk9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5vZmZzZXRYID0gbnVsbDtcbiAgICAgICAgdGhpcy5vZmZzZXRZID0gbnVsbDtcblxuICAgICAgICB0aGlzLl9hc3NpZ25Gcm9tKG9iaiwgdmFsaWRhdGUpO1xuICAgIH1cblxuICAgIF9nZXRBc3NpZ25hYmxlUHJvcGVydGllcyAoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5fZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMoKS5jb25jYXQoW1xuICAgICAgICAgICAgeyBuYW1lOiAnb2Zmc2V0WCcsIHR5cGU6IGludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ29mZnNldFknLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2Nyb2xsT3B0aW9ucyBleHRlbmRzIE9mZnNldE9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5zY3JvbGxUb0NlbnRlciAgID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2tpcFBhcmVudEZyYW1lcyA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdzY3JvbGxUb0NlbnRlcicsIHR5cGU6IGJvb2xlYW5PcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ3NraXBQYXJlbnRGcmFtZXMnLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vLyBFbGVtZW50IFNjcmVlbnNob3RcbmV4cG9ydCBjbGFzcyBFbGVtZW50U2NyZWVuc2hvdE9wdGlvbnMgZXh0ZW5kcyBBY3Rpb25PcHRpb25zIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc2Nyb2xsVGFyZ2V0WCAgID0gbnVsbDtcbiAgICAgICAgdGhpcy5zY3JvbGxUYXJnZXRZICAgPSBudWxsO1xuICAgICAgICB0aGlzLmluY2x1ZGVNYXJnaW5zICA9IGZhbHNlO1xuICAgICAgICB0aGlzLmluY2x1ZGVCb3JkZXJzICA9IHRydWU7XG4gICAgICAgIHRoaXMuaW5jbHVkZVBhZGRpbmdzID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLmNyb3AgPSB7XG4gICAgICAgICAgICBsZWZ0OiAgIG51bGwsXG4gICAgICAgICAgICByaWdodDogIG51bGwsXG4gICAgICAgICAgICB0b3A6ICAgIG51bGwsXG4gICAgICAgICAgICBib3R0b206IG51bGxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9hc3NpZ25Gcm9tKG9iaiwgdmFsaWRhdGUpO1xuICAgIH1cblxuICAgIF9nZXRBc3NpZ25hYmxlUHJvcGVydGllcyAoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5fZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMoKS5jb25jYXQoW1xuICAgICAgICAgICAgeyBuYW1lOiAnc2Nyb2xsVGFyZ2V0WCcsIHR5cGU6IGludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ3Njcm9sbFRhcmdldFknLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdjcm9wLmxlZnQnLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdjcm9wLnJpZ2h0JywgdHlwZTogaW50ZWdlck9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnY3JvcC50b3AnLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdjcm9wLmJvdHRvbScsIHR5cGU6IGludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ2luY2x1ZGVNYXJnaW5zJywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnaW5jbHVkZUJvcmRlcnMnLCB0eXBlOiBib29sZWFuT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdpbmNsdWRlUGFkZGluZ3MnLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vLyBNb3VzZVxuZXhwb3J0IGNsYXNzIE1vdXNlT3B0aW9ucyBleHRlbmRzIE9mZnNldE9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5tb2RpZmllcnMgPSB7XG4gICAgICAgICAgICBjdHJsOiAgZmFsc2UsXG4gICAgICAgICAgICBhbHQ6ICAgZmFsc2UsXG4gICAgICAgICAgICBzaGlmdDogZmFsc2UsXG4gICAgICAgICAgICBtZXRhOiAgZmFsc2VcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9hc3NpZ25Gcm9tKG9iaiwgdmFsaWRhdGUpO1xuICAgIH1cblxuICAgIF9nZXRBc3NpZ25hYmxlUHJvcGVydGllcyAoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5fZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMoKS5jb25jYXQoW1xuICAgICAgICAgICAgeyBuYW1lOiAnbW9kaWZpZXJzLmN0cmwnLCB0eXBlOiBib29sZWFuT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdtb2RpZmllcnMuYWx0JywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnbW9kaWZpZXJzLnNoaWZ0JywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnbW9kaWZpZXJzLm1ldGEnLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG5cbi8vIENsaWNrXG5leHBvcnQgY2xhc3MgQ2xpY2tPcHRpb25zIGV4dGVuZHMgTW91c2VPcHRpb25zIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuY2FyZXRQb3MgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdjYXJldFBvcycsIHR5cGU6IHBvc2l0aXZlSW50ZWdlck9wdGlvbiB9XG4gICAgICAgIF0pO1xuICAgIH1cbn1cblxuLy8gTW92ZVxuZXhwb3J0IGNsYXNzIE1vdmVPcHRpb25zIGV4dGVuZHMgTW91c2VPcHRpb25zIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc3BlZWQgICAgICAgICAgICAgICAgICAgPSBudWxsO1xuICAgICAgICB0aGlzLm1pbk1vdmluZ1RpbWUgICAgICAgICAgID0gbnVsbDtcbiAgICAgICAgdGhpcy5ob2xkTGVmdEJ1dHRvbiAgICAgICAgICA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNraXBTY3JvbGxpbmcgICAgICAgICAgID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2tpcERlZmF1bHREcmFnQmVoYXZpb3IgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9hc3NpZ25Gcm9tKG9iaiwgdmFsaWRhdGUpO1xuICAgIH1cblxuICAgIF9nZXRBc3NpZ25hYmxlUHJvcGVydGllcyAoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5fZ2V0QXNzaWduYWJsZVByb3BlcnRpZXMoKS5jb25jYXQoW1xuICAgICAgICAgICAgeyBuYW1lOiAnc3BlZWQnIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdtaW5Nb3ZpbmdUaW1lJyB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnaG9sZExlZnRCdXR0b24nIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdza2lwU2Nyb2xsaW5nJywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnc2tpcERlZmF1bHREcmFnQmVoYXZpb3InLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vLyBUeXBlXG5leHBvcnQgY2xhc3MgVHlwZU9wdGlvbnMgZXh0ZW5kcyBDbGlja09wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5yZXBsYWNlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGFzdGUgICA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdyZXBsYWNlJywgdHlwZTogYm9vbGVhbk9wdGlvbiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAncGFzdGUnLCB0eXBlOiBib29sZWFuT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vLyBEcmFnVG9FbGVtZW50XG5leHBvcnQgY2xhc3MgRHJhZ1RvRWxlbWVudE9wdGlvbnMgZXh0ZW5kcyBNb3VzZU9wdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yIChvYmosIHZhbGlkYXRlKSB7XG4gICAgICAgIHN1cGVyKG9iaiwgdmFsaWRhdGUpO1xuXG4gICAgICAgIHRoaXMuZGVzdGluYXRpb25PZmZzZXRYID0gbnVsbDtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbk9mZnNldFkgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRBc3NpZ25hYmxlUHJvcGVydGllcygpLmNvbmNhdChbXG4gICAgICAgICAgICB7IG5hbWU6ICdkZXN0aW5hdGlvbk9mZnNldFgnLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdkZXN0aW5hdGlvbk9mZnNldFknLCB0eXBlOiBpbnRlZ2VyT3B0aW9uIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG4vL1Jlc2l6ZVRvRml0RGV2aWNlXG5leHBvcnQgY2xhc3MgUmVzaXplVG9GaXREZXZpY2VPcHRpb25zIGV4dGVuZHMgQXNzaWduYWJsZSB7XG4gICAgY29uc3RydWN0b3IgKG9iaiwgdmFsaWRhdGUpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLnBvcnRyYWl0T3JpZW50YXRpb24gPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9hc3NpZ25Gcm9tKG9iaiwgdmFsaWRhdGUpO1xuICAgIH1cblxuICAgIF9nZXRBc3NpZ25hYmxlUHJvcGVydGllcyAoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB7IG5hbWU6ICdwb3J0cmFpdE9yaWVudGF0aW9uJywgdHlwZTogYm9vbGVhbk9wdGlvbiB9XG4gICAgICAgIF07XG4gICAgfVxufVxuXG4vL0Fzc2VydGlvblxuZXhwb3J0IGNsYXNzIEFzc2VydGlvbk9wdGlvbnMgZXh0ZW5kcyBBc3NpZ25hYmxlIHtcbiAgICBjb25zdHJ1Y3RvciAob2JqLCB2YWxpZGF0ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMudGltZW91dCAgICAgICAgICAgICAgID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmFsbG93VW5hd2FpdGVkUHJvbWlzZSA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2Fzc2lnbkZyb20ob2JqLCB2YWxpZGF0ZSk7XG4gICAgfVxuXG4gICAgX2dldEFzc2lnbmFibGVQcm9wZXJ0aWVzICgpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHsgbmFtZTogJ3RpbWVvdXQnLCB0eXBlOiBwb3NpdGl2ZUludGVnZXJPcHRpb24gfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ2FsbG93VW5hd2FpdGVkUHJvbWlzZScsIHR5cGU6IGJvb2xlYW5PcHRpb24gfVxuICAgICAgICBdO1xuICAgIH1cbn1cbiJdfQ==